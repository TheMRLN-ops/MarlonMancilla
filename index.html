<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Marlon Mancilla | Portfolio</title>
  <link rel="icon" type="image/png" href="favicon-32x32.png" />
  <style>
      /* Reset and Base Styles */
      * {
        margin: 0;                    /* Remove default margin from all elements */
        padding: 0;                  /* Remove default padding from all elements */
        box-sizing: border-box;      /* Include padding and border in element's total width/height */
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; /* System font stack for cross-platform consistency */
        line-height: 1.6;           /* Set line spacing to 1.6 times font size for readability */
        color: #1f2937;             /* Dark gray text color for light theme */
        background-color: #f3f4f6;  /* Light gray background for light theme */
        transition: background-color 0.3s ease, color 0.3s ease; /* Smooth color transitions for theme switching */
      }
      .dark body {
        background-color: #111827;   /* Dark background color when dark theme is active */
        color: #f9fafb;             /* Light text color for dark theme */
      }
      header {
        background-color: #ffffff;   /* White background for header in light theme */
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Subtle shadow below header */
        position: sticky;            /* Header stays at top when scrolling */
        top: 0;                     /* Position at very top of viewport */
        z-index: 100;               /* High z-index to ensure header stays above other content */
        transition: background-color 0.3s ease; /* Smooth background color transition */
      }
      .dark header {
        background-color: #1f2937;   /* Dark gray background for header in dark theme */
      }
      .header-container {
        max-width: 80rem;           /* Limit container width to 80rem (1280px) */
        margin: 0 auto;             /* Center the container horizontally */
        padding: 1.5rem;            /* Add 1.5rem padding inside container */
        display: flex;              /* Use flexbox layout */
        justify-content: space-between; /* Space items apart (logo left, nav right) */
        align-items: center;        /* Center items vertically */
      }
      .logo {
        font-size: 1.5rem;          /* Make logo text 1.5 times larger */
        font-weight: 700;           /* Make logo text bold */
        color: #2563eb;             /* Blue color for logo in light theme */
        text-decoration: none;      /* Remove underline from logo link */
      }
      .dark .logo {
        color: #60a5fa;             /* Lighter blue color for logo in dark theme */
      }
      nav {
        display: flex;              /* Use flexbox for navigation items */
        gap: 2rem;                  /* Add 2rem space between nav items */
        align-items: center;        /* Center nav items vertically */
      }
      nav a {
        color: #374151;             /* Gray color for nav links in light theme */
        text-decoration: none;      /* Remove underlines from nav links */
        font-weight: 500;           /* Medium font weight for nav links */
        transition: color 0.3s ease; /* Smooth color transition on hover */
      }
      nav a:hover {
        color: #2563eb;             /* Change to blue color when hovering over nav links */
      }
      .dark nav a {
        color: #d1d5db;             /* Light gray color for nav links in dark theme */
      }
      .dark nav a:hover {
        color: #60a5fa;             /* Light blue color for nav links on hover in dark theme */
      }
      .nav-cv-button {
        background-color: #2563eb;   /* Blue background for CV button in light theme */
        color: white;               /* White text for CV button */
        padding: 0.5rem 1rem;       /* Vertical and horizontal padding for CV button */
        border-radius: 0.375rem;    /* Rounded corners for CV button */
        font-weight: 500;           /* Medium font weight for CV button */
        transition: all 0.3s ease;  /* Smooth transition for all properties on hover */
      }
      .nav-cv-button:hover {
        background-color: #1d4ed8;   /* Darker blue background on hover */
        transform: translateY(-1px); /* Move button up slightly on hover */
      }
      .dark .nav-cv-button {
        background-color: #60a5fa;   /* Light blue background for CV button in dark theme */
        color: #111827;             /* Dark text for CV button in dark theme */
      }
      .dark .nav-cv-button:hover {
        background-color: #3b82f6;   /* Slightly darker blue on hover in dark theme */
      }
      .project-summary {
        cursor: pointer;            /* Show pointer cursor to indicate clickable element */
        position: relative;         /* Enable absolute positioning for pseudo-element */
        padding-right: 2rem;        /* Add space on right for dropdown arrow */
      }
      .project-summary::after {
        content: '↓';               /* Add downward arrow after project summary */
        position: absolute;         /* Position arrow absolutely within summary */
        right: 0;                   /* Place arrow at right edge */
        top: 50%;                   /* Center arrow vertically */
        transform: translateY(-50%); /* Adjust for exact vertical centering */
        transition: transform 0.3s ease; /* Smooth rotation transition */
      }
      .project-card.active .project-summary::after {
        transform: translateY(-50%) rotate(180deg); /* Rotate arrow 180 degrees when active */
      }
      .project-details {
        max-height: 0;              /* Initially collapse details section */
        overflow: hidden;           /* Hide content that exceeds max-height */
        transition: max-height 0.5s ease-out; /* Smooth expansion animation */
        padding: 0 1rem;            /* Horizontal padding for details */
      }
      .project-card.active .project-details {
        max-height: 500px;          /* Expand to 500px when active (adjust as needed) */
        padding: 1rem;              /* Add full padding when expanded */
        border-top: 1px solid #e5e7eb; /* Add top border when expanded */
      }
      .dark .project-card.active .project-details {
        border-top-color: #4b5563;  /* Darker border color for dark theme */
      }
      .tech-stack {
        display: flex;              /* Use flexbox for technology tags */
        gap: 0.5rem;                /* Small gap between tech tags */
        flex-wrap: wrap;            /* Allow tags to wrap to new line if needed */
        margin: 1rem 0;             /* Vertical margin around tech stack */
      }
      .tech-tag {
        background-color: #e5e7eb;   /* Light gray background for tech tags */
        padding: 0.25rem 0.75rem;   /* Small vertical, medium horizontal padding */
        border-radius: 9999px;      /* Fully rounded corners (pill shape) */
        font-size: 0.75rem;         /* Small font size for tags */
        color: #374151;             /* Dark gray text for tags in light theme */
      }
      .dark .tech-tag {
        background-color: #4b5563;   /* Darker gray background for tech tags in dark theme */
        color: #f3f4f6;             /* Light text for tech tags in dark theme */
      }
      .project-links {
        display: flex;              /* Use flexbox for project links */
        gap: 1rem;                  /* Space between project links */
      }
      .code-link, .demo-link {
        padding: 0.5rem 1rem;       /* Padding for link buttons */
        border-radius: 0.375rem;    /* Rounded corners for link buttons */
        font-size: 0.875rem;        /* Slightly smaller font size */
        text-decoration: none;      /* Remove underlines from links */
        transition: all 0.3s ease;  /* Smooth transition for all properties */
      }
      .code-link {
        background-color: #e5e7eb;   /* Light gray background for code links */
        color: #1f2937;             /* Dark text for code links */
      }
      .demo-link {
        background-color: #2563eb;   /* Blue background for demo links */
        color: white;               /* White text for demo links */
      }
      .dark .code-link {
        background-color: #4b5563;   /* Darker gray background for code links in dark theme */
        color: #f3f4f6;             /* Light text for code links in dark theme */
      }
      .dark .demo-link {
        background-color: #60a5fa;   /* Light blue background for demo links in dark theme */
        color: #111827;             /* Dark text for demo links in dark theme */
      }
      .toggle-btn {
        background-color: #e5e7eb;   /* Light gray background for toggle button */
        color: #374151;             /* Dark gray text for toggle button */
        border: none;               /* Remove default button border */
        padding: 0.5rem 1rem;       /* Padding inside toggle button */
        border-radius: 0.375rem;    /* Rounded corners for toggle button */
        font-size: 0.875rem;        /* Slightly smaller font size */
        font-weight: 500;           /* Medium font weight */
        cursor: pointer;            /* Show pointer cursor on hover */
        transition: all 0.3s ease;  /* Smooth transition for all properties */
      }
      .dark .toggle-btn {
        background-color: #374151;   /* Dark gray background for toggle button in dark theme */
        color: #f9fafb;             /* Light text for toggle button in dark theme */
      }
      section {
        padding: 4rem 1.5rem;       /* Large vertical padding, medium horizontal padding for sections */
      }
      .section-container {
        max-width: 64rem;           /* Limit section content width to 64rem (1024px) */
        margin: 0 auto;             /* Center section container horizontally */
      }
      .hero {
        background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('James_Webb.jpg.webp'); /* Dark overlay over background image */
        background-size: cover;      /* Scale background image to cover entire area */
        background-position: center; /* Center the background image */
        padding: 5rem 1.5rem;       /* Large padding for hero section */
      }
      .hero-container {
        max-width: 64rem;           /* Limit hero content width */
        margin: 0 auto;             /* Center hero container */
        display: flex;              /* Use flexbox layout */
        align-items: center;        /* Center items vertically */
        justify-content: center;    /* Center items horizontally */
        gap: 3rem;                  /* Large gap between hero content and image */
      }
      .hero-content {
        flex: 1;                    /* Take up available space in flex container */
        text-align: left;           /* Align hero text to the left */
      }
      .hero h2 {
        font-size: 2.5rem;          /* Large font size for hero heading */
        font-weight: 700;           /* Bold font weight */
        color: #f9fafb;             /* Light color for hero heading */
        background-color: rgba(31, 41, 55, 0.7); /* Semi-transparent dark background */
        padding: 0.5rem 1rem;       /* Padding around hero heading */
        border-radius: 0.5rem;      /* Rounded corners for heading background */
        display: inline-block;      /* Make background fit content size */
      }
      .hero-description-box {
        background-color: rgba(243, 244, 246, 0.8); /* Semi-transparent light background */
        padding: 1rem 1.5rem;       /* Padding inside description box */
        border-radius: 0.75rem;     /* Rounded corners for description box */
        display: inline-block;      /* Make box fit content size */
        margin-top: 1rem;           /* Space above description box */
        color: #1f2937;             /* Dark text color */
        font-size: 1.125rem;        /* Slightly larger font size */
      }
      .dark .hero-description-box {
        background-color: rgba(31, 41, 55, 0.8); /* Semi-transparent dark background for dark theme */
        color: #f3f4f6;             /* Light text color for dark theme */
      }
      .hero-image-carousel {
        position: relative;         /* Enable absolute positioning for carousel controls */
        width: 250px;               /* Fixed width for carousel */
        height: 300px;              /* Fixed height for carousel */
        overflow: hidden;           /* Hide images that exceed container bounds */
        border-radius: 0.75rem;     /* Rounded corners for carousel */
        flex-shrink: 0;             /* Prevent carousel from shrinking in flex layout */
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3); /* Drop shadow for carousel */
      }
      .carousel-image {
        position: absolute;         /* Stack carousel images on top of each other */
        width: 100%;                /* Full width of carousel container */
        height: 100%;               /* Full height of carousel container */
        object-fit: cover;          /* Scale image to cover container while maintaining aspect ratio */
        opacity: 0;                 /* Initially hide all images */
        visibility: hidden;         /* Completely hide non-active images */
        transition: opacity 0.7s ease-in-out; /* Smooth fade transition between images */
      }
      .carousel-image.active {
        opacity: 1;                 /* Show active carousel image */
        visibility: visible;        /* Make active image visible */
      }
      .carousel-btn {
        position: absolute;         /* Position carousel buttons over images */
        top: 50%;                   /* Center buttons vertically */
        transform: translateY(-50%); /* Adjust for exact vertical centering */
        background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent dark background */
        color: white;               /* White text/icons for buttons */
        border: none;               /* Remove default button border */
        padding: 0.5rem;            /* Padding inside carousel buttons */
        cursor: pointer;            /* Show pointer cursor on hover */
        font-size: 1.2rem;          /* Larger font size for button text */
        line-height: 1;             /* Remove extra line spacing */
        border-radius: 50%;         /* Make buttons circular */
        z-index: 2;                 /* Ensure buttons appear above images */
        opacity: 0.7;               /* Slightly transparent by default */
        transition: all 0.3s;       /* Smooth transition for all properties */
      }
      .carousel-btn:hover {
        background-color: rgba(0, 0, 0, 0.7); /* Darker background on hover */
        opacity: 1;                 /* Full opacity on hover */
      }
      .carousel-btn.prev { left: 10px; }   /* Position previous button on left */
      .carousel-btn.next { right: 10px; }  /* Position next button on right */
      .about, .contact {
        background-color: #ffffff;   /* White background for about and contact sections */
      }
      .projects {
        background-color: #f3f4f6;   /* Light gray background for projects section */
      }
      .dark .about, .dark .contact {
        background-color: #1f2937;   /* Dark background for about and contact sections in dark theme */
      }
      .dark .projects {
        background-color: #111827;   /* Darker background for projects section in dark theme */
      }
      .section-title {
        font-size: 1.8rem;          /* Large font size for section titles */
        font-weight: 600;           /* Semi-bold font weight */
        margin-bottom: 2rem;        /* Space below section titles */
        text-align: center;         /* Center section titles */
      }
      .about p {
        max-width: 48rem;           /* Limit width of about paragraph for readability */
        margin: 0 auto;             /* Center about paragraph */
        text-align: center;         /* Center text in about paragraph */
        line-height: 1.75;          /* Increased line spacing for readability */
      }
      
      .projects-grid {
        display: grid;              /* Use CSS Grid for projects layout */
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); /* Responsive columns with minimum 350px width */
        gap: 24px;                  /* Consistent gap between grid items */
        align-items: stretch;       /* Make all cards stretch to same height in each row */
      }
      
      .project-card {
        display: flex;              /* Use flexbox for project card layout */
        flex-direction: column;     /* Stack project card elements vertically */
        height: 100%;               /* Take full height of grid cell */
        background-color: #ffffff;  /* White background for project cards */
        border-radius: 0.75rem;     /* Rounded corners for elegant appearance */
        padding: 1.5rem;            /* Consistent padding inside all cards */
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
        transition: all 0.3s ease;  /* Smooth transition for hover effects */
      }
  
      .dark .project-card {
        background-color: #374151;   /* Dark background for project cards in dark theme */
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3); /* Stronger shadow for dark theme */
      }
      .project-card:hover {
        transform: translateY(-6px); /* Move card up more noticeably on hover */
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
      }
      .dark .project-card:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4); /* Enhanced shadow on hover for dark theme */
      }
      .project-title {
        font-size: 1.25rem;         /* Medium-large font size for project titles */
        font-weight: 700;           /* Bold font weight for project titles */
        margin-bottom: 0.5rem;      /* Small space below project titles */
      }
      .and-more {
        text-align: center;         /* Center "and more" text */
        margin-top: 2rem;           /* Space above "and more" text */
        font-style: italic;         /* Italicize "and more" text */
      }
      .contact p {
        text-align: center;         /* Center contact paragraph text */
        margin-bottom: 1.5rem;      /* Space below contact paragraphs */
      }
      .contact .section-container {
        text-align: center;         /* Center all content in contact section */
      }
      .cta-button {
        background-color: #2563eb;   /* Blue background for call-to-action button */
        color: #ffffff;             /* White text for CTA button */
        padding: 0.75rem 1.5rem;    /* Generous padding for CTA button */
        border-radius: 0.5rem;      /* Rounded corners for CTA button */
        text-decoration: none;      /* Remove underline from CTA button link */
        font-weight: 600;           /* Semi-bold font weight for CTA button */
        transition: all 0.3s ease;  /* Smooth transition for all properties */
      }
      .cta-button:hover {
        background-color: #1d4ed8;   /* Darker blue on hover */
        transform: translateY(-2px); /* Move button up slightly on hover */
      }
      footer {
        background-color: #e5e7eb;   /* Light gray background for footer */
        color: #6b7280;             /* Medium gray text color for footer */
        text-align: center;         /* Center footer text */
        padding: 2rem;              /* Padding around footer content */
        font-size: 0.875rem;        /* Smaller font size for footer */
      }
      .dark footer {
        background-color: #1f2937;   /* Dark background for footer in dark theme */
      }
      html {
        scroll-behavior: smooth;    /* Enable smooth scrolling for anchor links */
        scroll-padding-top: 100px;  /* Offset scroll position to account for sticky header */
      }
      @media (min-width: 768px) {   /* Styles for tablet and desktop screens */
        .projects-grid {
          grid-template-columns: repeat(2, 1fr); /* Exactly two columns for projects grid on larger screens */
          max-width: 800px;         /* Limit maximum width to keep cards reasonably sized */
          margin: 0 auto;           /* Center the grid container */
        }
      }
      @media (min-width: 1200px) {  /* Styles for large desktop screens */
        .projects-grid {
          grid-template-columns: repeat(3, 1fr); /* Three columns on very large screens */
          max-width: 1200px;        /* Larger max width for three columns */
        }
      }
      @media (max-width: 768px) {   /* Styles for mobile screens */
        .header-container {
          flex-direction: column;   /* Stack header items vertically on mobile */
          gap: 1.5rem;              /* Add gap between stacked header items */
        }
        .hero-container {
          flex-direction: column;   /* Stack hero items vertically on mobile */
          text-align: center;       /* Center hero content on mobile */
        }
        .hero-content {
          text-align: center;       /* Center hero text content on mobile */
        }
      }
      .project-image {
        display: none;              /* Initially hide project images */
        margin-top: 10px;           /* Space above project images when shown */
      }
          
      .project-image img {
        width: 300px;               /* Fixed width for project images */
        height: auto;               /* Maintain aspect ratio for project images */
        border-radius: 8px;         /* Rounded corners for project images */
      }
  
    </style>
</head>
<body>
  
<!-- THE MAIN FRONT PAGE STUFF -->
  
  <header>
    <div class="header-container">
      <h1 class="logo">Marlon Mancilla</h1>
      <nav>
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
        <a href="Mancilla_Marlon_Resume.pdf" download class="nav-cv-button">Download CV</a>
      </nav>
      <button id="toggleDark" class="toggle-btn">🌙 Dark Mode</button>
    </div>
  </header>

<!-- FIRST TEXT ABOUT ME -->
  
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <h2>Hi, I'm Marlon 👋</h2>
        <p class="hero-description-box">
          Physics graduate, tech enthusiast, and problem-solver focused on
          turning ideas into real-world solutions through data, code, and
          innovation.
        </p>
      </div>
      <!-- MY PICTURES -->
      <div class="hero-image-carousel">
        <img src="Foto_mia.jpg" alt="Marlon Mancilla" class="carousel-image active">
        <img src="Amigos.jpg" alt="Amigos" class="carousel-image">
        <img src="Cowboy_Pic.JPG" alt="Cowboy_pic" class="carousel-image">
        <img src="Foto_Jpn.JPG" alt="Foto Japon" class="carousel-image">
        <img src="Foto_Jpn2.JPEG" alt="Foto Japon 2" class="carousel-image">
        <img src="Foto_Jpn3.JPG" alt="Foto Japon 3" class="carousel-image">
        <img src="Grad_Bache.JPG" alt="Graduation Pic" class="carousel-image">
        <img src="Grad_PIC.JPG" alt="Graduation" class="carousel-image">
        <img src="Grad_asso.jpg" alt="Waeso" class="carousel-image">
        <img src="Sports_Pic.JPG" alt="Sports" class="carousel-image">
        <img src="Waeso_pic.jpg" alt="Waeso 2" class="carousel-image">
        <img src="Wolvering.JPG" alt="Wolvering" class="carousel-image">

        <!-- CLICKABLE BUTTONG PICTURES -->
        <button class="carousel-btn prev">❮</button>
        <button class="carousel-btn next">❯</button>
      </div>
    </div>
  </section>

  <!-- MORE ABOUT ME -->
  <section id="about" class="about">
    <div class="section-container">
      <h2 class="section-title">About Me</h2>
      <p>
        I'm passionate about engineering, programming, and building meaningful
        projects. With a solid background in physics and hands-on experience
        in research and development, I love exploring new tools,
        collaborating with others, and constantly learning.
      </p>
    </div>
  </section>

  <!-- LIST OF PROJECTS -->
  <section id="projects" class="projects">
    <div class="section-container">
      <h2 class="section-title">My Projects</h2>
      <div class="projects-grid">
        <div class="project-card" onclick="toggleImage(this)">
          <div class="project-summary">

            <!-- SONAR WITH ARDUINO -->
            <h4 class="project-title">Sonar with Arduino</h4>
            <p class="project-description">A scanning radar system using an ultrasonic sensor and servo motor, visualized in real-time with Python.</p>
            <div class="project-image">
              <img src="SonarArduino.jpg" alt="Sonar Project Demo">
          </div>
          </div>
          <div class="project-details">
            <div class="tech-stack"><span class="tech-tag">Arduino</span><span class="tech-tag">Python</span><span class="tech-tag">Signal Processing</span></div>
            <div class="project-links"><a href="#" class="code-link">View Code</a><a href="#" class="demo-link">See Demo</a></div>
          </div>
        </div>
        <div class="project-card">
          <div class="project-summary">

            <!-- INTERFEROMETRY PROJECT -->
            <h4 class="project-title">Interferometry Project</h4>
            <p class="project-description">I built an interferometry system to observe live cultivated cells, capturing nanoscale structural changes without physical contact.</p>
          </div>
          <div class="project-details">
            <div class="tech-stack"><span class="tech-tag">Optics</span><span class="tech-tag">MATLAB</span><span class="tech-tag">Lab Equipment</span></div>
            <div class="project-links"><a href="#" class="code-link">View Code</a><a href="#" class="demo-link">See Photos</a></div>
          </div>
        </div>
        <div class="project-card">
          <div class="project-summary">

            <!-- AI CALENDAR -->
            <h4 class="project-title">AI Calendar Assistant</h4>
            <p class="project-description">Built a smart calendar agent that understands natural language to move, prioritize, and optimize events using Python and Google Calendar API.</p>
          </div>
          <div class="project-details">
            <div class="tech-stack"><span class="tech-tag">Python</span><span class="tech-tag">NLP</span><span class="tech-tag">Google API</span></div>
            <div class="project-links"><a href="#" class="code-link">View Code</a><a href="#" class="demo-link">Try Demo</a></div>
          </div>
        </div>
        <div class="project-card">
          <div class="project-summary">

            <!-- BLOOD PRESSURE DEVICE -->
            <h4 class="project-title">Arduino Blood Pressure Monitor</h4>
            <p class="project-description">Designed and programmed a blood pressure sensor using Arduino and C++, enabling real-time measurements from a medical-grade sensor.</p>
          </div>
          <div class="project-details">
            <div class="tech-stack"><span class="tech-tag">Arduino</span><span class="tech-tag">C++</span><span class="tech-tag">Medical Devices</span></div>
            <div class="project-links"><a href="#" class="code-link">View Code</a><a href="#" class="demo-link">See Demo</a></div>
          </div>
        </div>
      </div>

      <!-- MORE PROJECTS -->
      <p class="and-more">And more...</p>
    </div>
  </section>

  <!-- CONTACT SECTIONS -->

  <section id="contact" class="contact">
    <div class="section-container">
      <h2 class="section-title">Get in Touch</h2>
      <p>Interested in collaborating or just want to connect? Reach out!</p>
      <a href="mailto:marlonmancillaz01@gmail.com" class="cta-button">Email Me</a>
    </div>
  </section>

  <footer>
    © 2025 Marlon Mancilla. All rights reserved.
  </footer>

  <script>
    // --- Carousel Functionality ---
    const images = document.querySelectorAll('.carousel-image');
    const prevBtn = document.querySelector('.carousel-btn.prev');
    const nextBtn = document.querySelector('.carousel-btn.next');
    let currentIndex = 0;
    let autoplayInterval = null;

    function showImage(index) {
      images.forEach((img, i) => {
        img.classList.toggle('active', i === index);
      });
    }

    function nextImage() {
      currentIndex = (currentIndex + 1) % images.length;
      showImage(currentIndex);
    }

    function startAutoplay() {
      // Clear any existing interval to prevent duplicates
      if (autoplayInterval) clearInterval(autoplayInterval);
      autoplayInterval = setInterval(nextImage, 4000);
    }

    if (images.length > 0) {
      nextBtn.addEventListener('click', () => {
        nextImage();
        startAutoplay(); // Restart timer on manual click
      });

      prevBtn.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        showImage(currentIndex);
        startAutoplay(); // Restart timer on manual click
      });

      startAutoplay();
    }

    // --- Project Card Expansion ---
    document.querySelectorAll('.project-card').forEach(card => {
      card.addEventListener('click', function(e) {
        if (e.target.closest('a')) return;
        const isActive = this.classList.contains('active');
        document.querySelectorAll('.project-card.active').forEach(otherCard => {
          if (otherCard !== this) {
             otherCard.classList.remove('active');
          }
        });
        this.classList.toggle('active');
      });
    });

    // --- Dark Mode Toggle ---
    const toggleDarkBtn = document.getElementById("toggleDark");
    const html = document.documentElement;
    
    // Check for saved theme in localStorage
    if (localStorage.getItem('theme') === 'dark') {
      html.classList.add('dark');
    }

    function updateButtonText() {
      if (html.classList.contains('dark')) {
        toggleDarkBtn.innerHTML = "☀️ Light Mode";
      } else {
        toggleDarkBtn.innerHTML = "🌙 Dark Mode";
      }
    }
    updateButtonText();

    toggleDarkBtn.addEventListener("click", () => {
      html.classList.toggle("dark");
      if (html.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
      updateButtonText();
    });

    // --- Scroll to top on load ---
    window.addEventListener('load', () => window.scrollTo(0, 0));
    
    function toggleImage(card) {
      const imgDiv = card.querySelector(".project-image");
      imgDiv.style.display = imgDiv.style.display === "block" ? "none" : "block";
    }
    
  </script>

</body>
</html>
